// Generated by CoffeeScript 1.4.0

module.exports = function(subscribe, publish, edge, context) {
  return subscribe('event:register:controller', function(primaryViewportID) {
    var id, _base;
    context.gimbal || (context.gimbal = {});
    (_base = context.gimbal).controllers || (_base.controllers = {});
    id = edge.localId();
    context.gimbal.controllers[id] = {
      edge: edge,
      primary: primaryViewportID,
      viewports: []
    };
    context.gimbal.controllers[id].viewports.push(primaryViewportID);
    return publish('event:register:controller:ok');
  });
};
