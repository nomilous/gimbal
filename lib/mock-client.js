// Generated by CoffeeScript 1.4.0
var MockClient, ioClient;

ioClient = require('socket.io-client');

module.exports = MockClient = (function() {

  function MockClient(port, mode, wait, toCallback) {
    var _this = this;
    setTimeout((function() {
      return toCallback();
    }), wait);
    this.received || (this.received = {});
    this.connection = ioClient.connect("http://localhost:" + port);
    this.connection.on('event:client:start', function(payload) {
      return _this.connection.emit("event:register:" + mode, {
        pending: 'DATA'
      });
    });
    this.connection.on('event:register:viewport:ok', function(payload) {
      return _this.received['event:register:viewport:ok'] = payload;
    });
  }

  return MockClient;

})();
